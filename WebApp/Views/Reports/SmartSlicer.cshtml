@model WebApp.ViewModel.CustomizeMetricsViewModel
@{
    ViewBag.Title = "Smart Slicer";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    h2 {
        color: #000;
        text-align: center;
        font-size: 2em;
    }

    .warpper {
        display: grid;
        flex-direction: column;
        align-items: center;
    }

    .tab {
        cursor: pointer;
        padding: 10px 20px;
        margin: 0px 2px;
        background-color: #2f4353 !important;
        display: inline-block;
        color: #fff;
        border-radius: 3px 3px 0px 0px;
        box-shadow: 0 0.5rem 0.8rem #00000080;
    }

    .tabs {
        padding-left: 25px;
    }

    .panels {
        background: #ffffff;
        box-shadow: 0 2rem 2rem #00000080;
        width: 100%;
        border-radius: 3px;
        overflow: hidden;
    }

    .panel {
        display: none;
        animation: fadein .8s;
    }

    .panel-title {
        font-size: 1.5em;
        font-weight: bold
    }

    .radio {
        display: none;
    }



    #one:checked ~ .panels #one-panel,
    #two:checked ~ .panels #two-panel {
        display: block
    }


    #one:checked ~ .tabs #one-tab,
    #two:checked ~ .tabs #two-tab {
        background: #fff !important;
        color: #000;
        border-top: 3px solid #fff;
        border-left: 3px solid #fff;
        border-right: 3px solid #fff;
        font-weight: bold;
        border-top-left-radius: 7px;
        border-top-right-radius: 7px;
    }

    .modal {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 5 !important; /* Sit on top */
        padding-top: 65px; /* Location of the box */
        left: 120px;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        overflow: auto; /* Enable scroll if needed */
        background-color: rgb(0,0,0); /* Fallback color */
        background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    }

    /* Modal Content */
    .modal-content {
        background-color: #fefefe;
        margin: auto;
        padding: 20px;
        border: 1px solid #888;
        width: 75%;
        border-radius: 25px;
    }

    .close {
        color: #aaaaaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
    }

        .close:hover,
        .close:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }

    input:read-only {
        background-color: lightgray;
    }
</style>
<div class="app-main__inner" id="dvall">
    <input class="radio" id="one" name="group" type="radio" checked>
    <input class="radio" id="two" name="group" type="radio">
    <div class="tabs">
        <label class="tab" id="one-tab" for="one">Saved Datasets</label>
        <label class="tab" id="two-tab" for="two">Smart Slicer</label>
    </div>
    <div class="panels">
        <div class="multisteps-form__panel  p-2 m-2 bg-white panel" id="one-panel">
            <div id="dvDataset">
                <div class="mb-3 pr-3 pt-3 pl-3 card col-md-12 col-xl-12" style="padding-bottom:20px;">
                    <h5>Dataset List</h5>
                    <div class="row mt-3" id="dvActivityData">
                        <div class="table-responsive">
                            <table class="table" id="groupListTable">
                                <thead>
                                    <tr>
                                        <th scope="col" style="text-align:center;">Dataset Name</th>
                                        <th scope="col" style="text-align:left;">Criteria</th>
                                        <th scope="col" style="text-align:center;">Created Date</th>
                                        <th scope="col" style="text-align: left;">Created By</th>
                                        <th scope="col" style="text-align:center;">Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @if (Model != null)
                                    {
                                        foreach (var item in Model.lstCRDataset)
                                        {
                                            <tr>
                                                <td>@item.DSName</td>
                                                <td>@Html.Raw(item.DSCriteria)</td>
                                                <td>@item.AddedDate</td>
                                                <td>@item.AddedBy</td>
                                                <td>Generate Report</td>
                                            </tr>
                                        }
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="multisteps-form__panel  p-2 m-2 bg-white panel" id="two-panel">
            <div id="dvSmartSlicer">

                <div class="mb-3 pr-3 pt-3 pl-3 card col-md-12 col-xl-12" style="padding-bottom:20px;">
                    <h5>Transactional Filter</h5>

                    <div class="row mt-4 col-md-12 col-xl-12 ml-0">
                        <input type="radio" id="chkTransacting" name="firstFilters" style="width:20px; cursor:pointer;" /> &nbsp; Transacting
                        <input type="radio" id="chkNonTransacting" name="firstFilters" style="width:20px; cursor:pointer;margin-left:20px;" /> &nbsp;Non Transacting
                        <input type="radio" id="chkMemberAcquition" name="firstFilters" style="width: 20px; cursor: pointer; margin-left: 20px;" /> &nbsp;Member Acquition
                    </div>

                    <div class="row mt-4 col-md-12 col-xl-12 ml-0" id="dvTxnFilters" style="display:none;">
                        <input type="radio" id="chkAll" name="secondFilters" style="width: 20px; cursor: pointer;" /> &nbsp;All &nbsp;
                        <input type="radio" id="chkTxnOnlyOnce" name="secondFilters" style="width:20px; cursor:pointer;" /> &nbsp; Only Once
                        <input type="radio" id="chkTxnInactive" name="secondFilters" style="width:20px; cursor:pointer;margin-left:20px;" /> &nbsp;Inactive
                        <input type="radio" id="chkTxnCumiulative" name="secondFilters" style="width: 20px; cursor: pointer; margin-left: 20px;" /> &nbsp;Cumulative Count/Spend
                    </div>

                    <div class="row mt-4 col-md-12 col-xl-12 ml-0" id="dvTxnOnlyOnce" style="display:none;">
                        @Html.DropDownListFor(x => Model.dummyCategory, new SelectList(Model.OnlyOnceDDL(), "Value", "Text"), "Please Select", htmlAttributes: new { @class = "input100", @id = "ddlOnlyOnce" })&nbsp;
                    </div>

                    <div class="row mt-4 col-md-12 col-xl-12 ml-0" id="dvTxnInactive" style="display:none;">
                        @Html.DropDownListFor(x => Model.dummyCategory, new SelectList(Model.InactiveDDL(), "Value", "Text"), "Please Select", htmlAttributes: new { @class = "input100", @id = "ddlInactive" })&nbsp;
                        <input type="checkbox" id="chkExcludeOnlyOnce" style="width:20px; height:20px; margin-top:10px; margin-left:10px; cursor:pointer;" /><span style="margin-top:10px;margin-left:3px;">Exclude Only Once</span>
                    </div>

                    <div style="border:1px solid lightgrey; border-radius:5px; margin-top:20px; margin-left:20px;display:none;" id="dvCumulative">
                        <div class="row mt-2 col-md-12 col-xl-12 ml-0">
                            <input type="radio" id="rbtnCTxnCount" name="CumulativeFilters" style="width: 20px; height: 20px;cursor:pointer;" /> &nbsp;Txn Count &nbsp;
                            @Html.DropDownListFor(x => Model.dummyCategory, new SelectList(Model.LessThanMoreThan(), "Value", "Text"), "Please Select", htmlAttributes: new { @class = "input40", @disabled = "disabled", @id = "ddlTxnCumulative" })&nbsp;
                            <input type="number" id="txtCTxnCount" class="input40" placeholder="Txn Count" disabled /><span style="margin-left: 10px; margin-right: 10px;margin-top:10px;"> in last</span>
                            <input type="number" id="txtCTxnMonths" class="input20" placeholder="months" disabled style="margin-right:10px;" />
                            @Html.DropDownListFor(x => Model.dummyCategory, new SelectList(Model.CumulativeFrequency(), "Value", "Text"), "Please Select", htmlAttributes: new { @class = "input40", @disabled = "disabled", @id = "ddlTxnCumulativeFrequency" })&nbsp;
                        </div>

                        <div class="row mt-4 mb-2 col-md-12 col-xl-12 ml-0">
                            <input type="radio" id="rbtnCSpend" name="CumulativeFilters" style="width: 20px; height: 20px; cursor: pointer;" /> &nbsp;Spend&nbsp;
                            @Html.DropDownListFor(x => Model.dummyCategory, new SelectList(Model.LessThanMoreThan(), "Value", "Text"), "Please Select", htmlAttributes: new { @class = "input40", @disabled = "disabled", @id = "ddlSpendCumulative" })&nbsp;
                            <input type="number" id="txtCSpendCount" class="input40" placeholder="Txn Count" disabled /><span style="margin-left: 10px; margin-right: 10px;margin-top:10px;"> in last</span>
                            <input type="number" id="txtCSpendMonths" class="input20" placeholder="months" disabled style="margin-right:10px;" />
                            @Html.DropDownListFor(x => Model.dummyCategory, new SelectList(Model.CumulativeFrequency(), "Value", "Text"), "Please Select", htmlAttributes: new { @class = "input40", @disabled = "disabled", @id = "ddlSpendCumulativeFrequency" })&nbsp;
                        </div>
                    </div>

                    <div class="row mt-4 col-md-12 col-xl-12 ml-0" id="dvNonTxnFilters" style="display:none;">
                        <input type="radio" id="chkNonTxnAll" name="NonTxnsecondFilters" style="width: 20px; cursor: pointer;" /> &nbsp;All &nbsp;
                        <input type="radio" id="chkNonTxnEnrolled" name="NonTxnsecondFilters" style="width:20px; cursor:pointer;" /> &nbsp; Enrolled Non Transacting
                        <input type="radio" id="chkNonTxnBulkUpload" name="NonTxnsecondFilters" style="width:20px; cursor:pointer;margin-left:20px;" /> &nbsp;Bulk Upload
                        <input type="radio" id="chkNonTxnReferal" name="NonTxnsecondFilters" style="width: 20px; cursor: pointer; margin-left: 20px;" /> &nbsp;Referal
                        <input type="radio" id="chkNonTxnDLC" name="NonTxnsecondFilters" style="width: 20px; cursor: pointer; margin-left: 20px;" /> &nbsp;DLC
                    </div>

                    <div class="row mt-4 col-md-12 col-xl-12 ml-0" id="dvNonTxnDLC" style="display:none;">
                        <span style="margin-top:10px;margin-right:5px;">QR Source</span> @Html.DropDownListFor(x => Model.dummyCategory, new SelectList(Model.lstDLCSource, "Value", "Text"), "Please Select", htmlAttributes: new { @class = "input100", @id = "ddlDLCSourceNT" })&nbsp;
                    </div>

                    <div class="row mt-4 col-md-12 col-xl-12 ml-0" id="dvMemberAFilters" style="display:none;">
                        <input type="radio" id="chkMReferal" name="MemberAFilters" style="width: 20px; cursor: pointer;" /> &nbsp;Referal &nbsp;
                        <input type="radio" id="chkMDLC" name="MemberAFilters" style="width:20px; cursor:pointer;" /> &nbsp; DLC
                    </div>

                    <div class="row mt-4 col-md-12 col-xl-12 ml-0" id="dvMemberAThirdFilters" style="display:none;">
                        <input type="radio" id="chkMAAll" name="MemberAThirdFilters" style="width: 20px; cursor: pointer;" /> &nbsp;All &nbsp;
                        <input type="radio" id="chkMATransacting" name="MemberAThirdFilters" style="width:20px; cursor:pointer;" /> &nbsp; Transacting &nbsp;
                        <input type="radio" id="chkMANonTransacting" name="MemberAThirdFilters" style="width:20px; cursor:pointer;" /> &nbsp; Only Registered
                    </div>

                    <div class="row mt-4 col-md-12 col-xl-12 ml-0" id="dvMDLCSource" style="display:none;">
                        <span style="margin-top:10px;margin-right:5px;">QR Source</span> @Html.DropDownListFor(x => Model.dummyCategory, new SelectList(Model.lstDLCSource, "Value", "Text"), "Please Select", htmlAttributes: new { @class = "input100", @id = "ddlDLCSource" })&nbsp;
                    </div>

                    <div class="row mt-4 col-md-12 col-xl-12" id="dvAvgTicket">
                        <div class="col-xl-1">
                            <input type="checkbox" id="chkAvgTicket" style="width:20px; height:20px; cursor:pointer;" />
                        </div>
                        <div class="col-xl-3" style="margin-left:-40px;">
                            Average Ticket Size
                        </div>
                        <div class="col-xl-3">
                            <input type="number" id="txtAvgTicket" class="input40" placeholder="Ticket size" disabled />
                        </div>
                    </div>

                    <div class="row mt-4 col-md-12 col-xl-12" id="dvEnrolledRange">
                        <div class="col-xl-1">
                            <input type="checkbox" id="chkEnrolledRange" style="width:20px; height:20px; cursor:pointer;" />
                        </div>
                        <div class="col-xl-3" style="margin-left:-40px;">
                            Enrolled Range
                        </div>
                        <div class="col-xl-8 row" id="divDateRange" style="margin-left:0px;">
                            <input type="date" id="txtEnrollfromdt" class="input40" placeholder="From Enrolled" disabled />
                            <input type="date" id="txtEnrolltodt" class="input40" placeholder="To Enrolled" disabled style="margin-left:5px;" />
                        </div>
                    </div>

                    <div class="row mt-2 col-md-12 col-xl-12" id="dvInactive">
                        <div class="col-xl-1">
                            <input type="checkbox" id="chkInactiveSince" style="width:20px; height:20px; cursor:pointer;" />
                        </div>
                        <div class="col-xl-3" style="margin-left:-40px;">
                            Inactive since (days)
                        </div>
                        <div class="col-xl-3">
                            <input type="number" id="txtNonTransactedMax" class="input40" placeholder="Enter days" disabled />
                        </div>
                    </div>

                    <div class="row mt-2 col-md-12 col-xl-12" id="dvSpend">
                        <div class="col-xl-1">
                            <input type="checkbox" id="chkSpend" style="width:20px; height:20px; cursor:pointer;" />
                        </div>
                        <div class="col-xl-3" style="margin-left:-40px;">
                            Spends (Rs.)
                        </div>
                        <div class="col-xl-6">
                            <input type="number" id="txtSpendMin" class="input40" placeholder="From/Less than" disabled />
                            <input type="number" id="txtSpendMax" class="input40" placeholder="To/More than" disabled />
                        </div>
                    </div>

                    <div class="row mt-2 col-md-12 col-xl-12" id="dvTxnCount">
                        <div class="col-xl-1">
                            <input type="checkbox" id="chkTxnCount" style="width:20px; height:20px; cursor:pointer;" />
                        </div>
                        <div class="col-xl-3" style="margin-left:-40px;">
                            Transaction Count
                        </div>
                        <div class="col-xl-6">
                            <input type="number" id="txtTxnCountMin" class="input40" placeholder="From/Less than" disabled />
                            <input type="number" id="txtTxnCountMax" class="input40" placeholder="To/More than" disabled />
                        </div>
                    </div>

                    <div class="row mt-2 col-md-12 col-xl-12" id="dvPointBalance">
                        <div class="col-xl-1">
                            <input type="checkbox" id="chkPointBalance" style="width:20px; height:20px; cursor:pointer;" />
                        </div>
                        <div class="col-xl-3" style="margin-left:-40px;">
                            Points Balance
                        </div>
                        <div class="col-xl-6">
                            <input type="number" id="txtPointsBalMin" class="input40" placeholder="From/Less than" disabled />
                            <input type="number" id="txtPointsBalMax" class="input40" placeholder="To/More than" disabled />
                        </div>
                    </div>

                    <div class="row mt-2 col-md-12 col-xl-12" style="padding-bottom:20px;" id="dvRedeemed">
                        <div class="col-xl-1">
                            <input type="checkbox" id="chkRedeemed" style="width:20px; height:20px; cursor:pointer;" />
                        </div>
                        <div class="col-xl-3" style="margin-left:-40px;">
                            Redeemed
                        </div>
                        <div class="col-xl-3">
                            <input type="radio" id="rbtnRedeemed" name="RedeemedOrNot" style="width:20px;height:20px; cursor:pointer;" disabled />&nbsp; Yes
                            <input type="radio" id="rbtnNonRedeemed" name="RedeemedOrNot" style="width: 20px; height: 20px; cursor: pointer; margin-left: 20px;" disabled />&nbsp; No
                        </div>
                    </div>

                    <hr id="hrProduct" style="border-top: dashed 1px;" />
                    <h5 id="headingProduct">Product Filter</h5>

                    <div class="row mt-2 col-md-12 col-xl-12" id="dvNeverPurchased">
                        <div class="col-xl-1">
                            <input type="checkbox" id="chkNeverPurchased" style="width:20px; height:20px; cursor:pointer;" />
                        </div>
                        <div class="col-xl-3" style="margin-left:-40px;">
                            Never Purchased
                        </div>
                        <div class="row col-xl-8 ml-0">
                            @Html.DropDownListFor(x => Model.dummyCategory, new SelectList(Model.lstCategory, "Value", "Text"), "All Category", htmlAttributes: new { @class = "input40", @disabled = "disabled", @id = "ddlNPCategory" })&nbsp;
                            @Html.DropDownListFor(x => Model.dummySubCategory, new SelectList(Model.lstSubCategory, "Value", "Text"), "All SubCategory", htmlAttributes: new { @class = "input40", @disabled = "disabled", @id = "ddlNPSubCategory" })&nbsp;
                            @Html.DropDownListFor(x => Model.dummyProduct, new SelectList(Model.lstProduct, "Value", "Text"), "All Products", htmlAttributes: new { @class = "input40", @disabled = "disabled", @id = "ddlNPProduct" })
                        </div>
                    </div>

                    <div class="row mt-2 col-md-12 col-xl-12" id="dvPurchased">
                        <div class="col-xl-1">
                            <input type="checkbox" id="chkPurchased" style="width:20px; height:20px; cursor:pointer;" />
                        </div>
                        <div class="col-xl-3" style="margin-left:-40px;">
                            Purchased
                        </div>
                        <div class="row col-xl-8 ml-0">
                            @Html.DropDownListFor(x => Model.dummyCategory, new SelectList(Model.lstCategory, "Value", "Text"), "All Category", htmlAttributes: new { @class = "input40", @disabled = "disabled", @id = "ddlPCategory" })&nbsp;
                            @Html.DropDownListFor(x => Model.dummySubCategory, new SelectList(Model.lstSubCategory, "Value", "Text"), "All SubCategory", htmlAttributes: new { @class = "input40", @disabled = "disabled", @id = "ddlPSubCategory" })&nbsp;
                            @Html.DropDownListFor(x => Model.dummyProduct, new SelectList(Model.lstProduct, "Value", "Text"), "All Products", htmlAttributes: new { @class = "input40", @disabled = "disabled", @id = "ddlPProduct" })
                        </div>
                    </div>

                    <hr id="hrBrand" style="border-top: dashed 1px;" />
                    <h5> Store Filter</h5>

                    <div class="row mt-2 col-md-12 col-xl-12" style="border-top:dashed solid grey;">
                        <div class="col-xl-1">
                            <input type="checkbox" id="chkBrands" style="width:20px; height:20px; cursor:pointer;" />
                        </div>
                        <div class="col-xl-3" style="margin-left:-40px;">
                            Zone
                        </div>
                        <div class="row col-xl-8 ml-0">
                            @Html.DropDownListFor(x => Model.dummyCategory, new SelectList(Model.lstBrands, "Value", "Text"), "All", htmlAttributes: new { @class = "input40", @disabled = "disabled", @id = "ddlBrands" })

                        </div>
                    </div>

                    <div class="row mt-2 col-md-12 col-xl-12">
                        <div class="col-xl-1">
                            <input type="checkbox" id="chkOutlet" style="width:20px; height:20px; cursor:pointer;" />
                        </div>
                        <div class="col-xl-3" style="margin-left:-40px;">
                            Enrolled Outlet
                        </div>
                        <div class="row col-xl-8 ml-0">
                            @Html.ListBoxFor(x => Model.dummyCategory, new MultiSelectList(Model.lstOutlets, "Value", "Text"), new { @class = "input50", Multiple = "multiple", @disabled = "disabled", @id = "lstBoxOutlet" })
                        </div>
                    </div>

                    <div class="row mt-2 col-md-12 col-xl-12">
                        <div class="col-xl-1">
                            <input type="checkbox" id="chkTOutlet" style="width:20px; height:20px; cursor:pointer;" />
                        </div>
                        <div class="col-xl-3" style="margin-left:-40px;">
                            Transacting Outlet
                        </div>
                        <div class="row col-xl-3 ml-0">
                            @Html.ListBoxFor(x => Model.dummyCategory, new MultiSelectList(Model.lstOutlets, "Value", "Text"), new { @class = "input50", Multiple = "multiple", @disabled = "disabled", @id = "lstBoxTOutlet" })
                        </div>
                        <div class="row col-xl-4 ml-0">
                            <input type="radio" id="chkTOutletAnyOne" name="TOutlet" style="width: 20px; cursor: pointer;" disabled /> <span style="padding-top:41px;">&nbsp;Anyone &nbsp;</span>
                            <input type="radio" id="chkTOutletLast" name="TOutlet" style="width:20px; cursor:pointer;" disabled /> <span style="padding-top:41px;">&nbsp;Last &nbsp;</span>
                        </div>
                    </div>

                    <hr id="hrDemography" style="border-top: dashed 1px;" />
                    <h5>Demographic Filter</h5>

                    <div class="row mt-4 col-md-12 col-xl-12" id="dvTier">
                        <div class="col-xl-1">
                            <input type="checkbox" id="chkTier" style="width:20px; height:20px; cursor:pointer;" />
                        </div>
                        <div class="col-xl-3" style="margin-left:-40px;">
                            Tier
                        </div>
                        <div class="row col-xl-8 ml-0">
                            @Html.DropDownListFor(x => Model.dummyCategory, new SelectList(Model.lstTiers, "Value", "Text"), "Please Select", htmlAttributes: new { @class = "input40", @disabled = "disabled", @id = "ddlTier" })&nbsp;

                        </div>
                    </div>

                    <div class="row mt-2 col-md-12 col-xl-12" id="dvGender">
                        <div class="col-xl-1">
                            <input type="checkbox" id="chkGender" style="width:20px; height:20px; cursor:pointer;" />
                        </div>
                        <div class="col-xl-3" style="margin-left:-40px;">
                            Gender
                        </div>
                        <div class="col-xl-8 row" style="margin-left:0px;">
                            @Html.DropDownListFor(x => Model.dummyCategory, new SelectList(Model.Gender(), "Value", "Text"), "All", htmlAttributes: new { @class = "input40", @disabled = "disabled", @id = "ddlGender" })
                        </div>
                    </div>

                    <div class="row mt-2 col-md-12 col-xl-12" id="dvCity">
                        <div class="col-xl-1">
                            <input type="checkbox" id="chkCity" style="width:20px; height:20px; cursor:pointer;" />
                        </div>
                        <div class="col-xl-3" style="margin-left:-40px;">
                            City
                        </div>
                        <div class="col-xl-8 row" style="margin-left:0px;">
                            <input type="text" id="txtCity" class="input40" placeholder="City" disabled />
                        </div>
                    </div>

                    <div class="row mt-2 col-md-12 col-xl-12" id="dvAge">
                        <div class="col-xl-1">
                            <input type="checkbox" id="chkAge" style="width:20px; height:20px; cursor:pointer;" />
                        </div>
                        <div class="col-xl-3" style="margin-left:-40px;">
                            Age
                        </div>
                        <div class="col-xl-8 row" style="margin-left:0px;">
                            <input type="number" id="txtAgefrom" class="input40" placeholder="Age From" disabled />
                            <input type="number" id="txtAgeTo" class="input40" placeholder="Age To" disabled style="margin-left:5px;" />
                        </div>
                    </div>

                    <hr id="hrButtons" style="border-top: dashed 1px;" />

                    <div class="row mt-4 col-md-12 col-xl-12">
                        <button id="btnFilter" class="btn btn-primary login-btn">Filter</button>
                        <button id="btnGenerate" class="btn btn-primary login-btn ml-2">Generate Report</button>
                        <button id="btnSave" class="btn btn-primary login-btn ml-2">Save For Campaign</button>                       
                    </div>
                    <div class="row mt-4 col-md-12 col-xl-12" style="display:none;" id="dvDatasetSave">                        
                        <input type="text" id="txtDSName" class="input100" placeholder="Dataset Name" />
                        <button id="btnSaveDS" class="btn btn-primary login-btn ml-2">Save Dataset</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="~/Scripts/jquery-ui-1.12.1.js"></script>
<script src="~/Scripts/jquery-ui-1.12.1.min.js"></script>
<link href="~/Content/themes/base/jquery-ui.min.css" rel="stylesheet" />
<link href="~/Content/themes/base/jquery-ui.css" rel="stylesheet" />

<script>
    $(document).ready(function () {
        $('input[type="radio"]').on('change', function () {
            $('input[name="' + this.name + '"]').not(this).prop('checked', false);
            ShowSecondFilters();
        });

        $("#btnFilter").click(function () {
            GetDataToFilter();
        });

        $("#btnGenerate").click(function () {
            alert("Generate");
        });
        $("#btnSave").click(function () {
            $("#dvDatasetSave").show();            
        });
        $("#btnSaveDS").click(function () {
            SaveFilterCriteria();
        });
        EnableDisableControls();

        //document.getElementById("btnGenerate").disabled = "disabled";
        //document.getElementById("btnSave").disabled = "disabled";
    });

    function EnableDisableControls() {

        $("#chkAvgTicket").on('change', function () {
            if ($("#chkAvgTicket").is(":checked")) {
                $("#txtAvgTicket").prop('disabled', false);
            }
            else {
                $("#txtAvgTicket").prop('disabled', true);
            }
        });

        $("#chkEnrolledRange").on('change', function () {
            if ($("#chkEnrolledRange").is(":checked")) {
                $("#txtEnrollfromdt").prop('disabled', false);
                $("#txtEnrolltodt").prop('disabled', false);
            }
            else {
                $("#txtEnrollfromdt").prop('disabled', true);
                $("#txtEnrolltodt").prop('disabled', true);
            }
        });

        $("#chkInactiveSince").on('change', function () {
            if ($("#chkInactiveSince").is(":checked")) {
                $("#txtNonTransactedMax").prop('disabled', false);
            }
            else {
                $("#txtNonTransactedMax").prop('disabled', true);
            }
        });

        $("#chkSpend").on('change', function () {
            if ($("#chkSpend").is(":checked")) {
                $("#txtSpendMin").prop('disabled', false);
                $("#txtSpendMax").prop('disabled', false);
            }
            else {
                $("#txtSpendMin").prop('disabled', true);
                $("#txtSpendMax").prop('disabled', true);
            }
        });

        $("#chkTxnCount").on('change', function () {
            if ($("#chkTxnCount").is(":checked")) {
                $("#txtTxnCountMin").prop('disabled', false);
                $("#txtTxnCountMax").prop('disabled', false);
            }
            else {
                $("#txtTxnCountMin").prop('disabled', true);
                $("#txtTxnCountMax").prop('disabled', true);
            }
        });

        $("#chkPointBalance").on('change', function () {
            if ($("#chkPointBalance").is(":checked")) {
                $("#txtPointsBalMin").prop('disabled', false);
                $("#txtPointsBalMax").prop('disabled', false);
            }
            else {
                $("#txtPointsBalMin").prop('disabled', true);
                $("#txtPointsBalMax").prop('disabled', true);
            }
        });

        $("#chkRedeemed").on('change', function () {
            if ($("#chkRedeemed").is(":checked")) {
                $("#rbtnRedeemed").prop('disabled', false);
                $("#rbtnNonRedeemed").prop('disabled', false);
            }
            else {
                $("#rbtnRedeemed").prop('disabled', true);
                $("#rbtnNonRedeemed").prop('disabled', true);
            }
        });

        $("#chkNeverPurchased").on('change', function () {
            if ($("#chkNeverPurchased").is(":checked")) {
                $("#ddlNPCategory").prop('disabled', false);
                $("#ddlNPSubCategory").prop('disabled', false);
                $("#ddlNPProduct").prop('disabled', false);
            }
            else {
                $("#ddlNPCategory").prop('disabled', true);
                $("#ddlNPSubCategory").prop('disabled', true);
                $("#ddlNPProduct").prop('disabled', true);
            }
        });

        $("#chkPurchased").on('change', function () {
            if ($("#chkPurchased").is(":checked")) {
                $("#ddlPCategory").prop('disabled', false);
                $("#ddlPSubCategory").prop('disabled', false);
                $("#ddlPProduct").prop('disabled', false);
            }
            else {
                $("#ddlPCategory").prop('disabled', true);
                $("#ddlPSubCategory").prop('disabled', true);
                $("#ddlPProduct").prop('disabled', true);
            }
        });

        $("#chkTier").on('change', function () {
            if ($("#chkTier").is(":checked")) {
                $("#ddlTier").prop('disabled', false);
            }
            else {
                $("#ddlTier").prop('disabled', true);
            }
        });

        $("#chkBrands").on('change', function () {
            if ($("#chkBrands").is(":checked")) {
                $("#ddlBrands").prop('disabled', false);
            }
            else {
                $("#ddlBrands").prop('disabled', true);
            }
        });

        $("#chkOutlet").on('change', function () {
            if ($("#chkOutlet").is(":checked")) {
                $("#lstBoxOutlet").prop("disabled", false);
            }
            else {
                $("#lstBoxOutlet").prop("disabled", true);
                $("#lstBoxOutlet")[0].selectedIndex = -1;
            }
        });

        $("#chkTOutlet").on('change', function () {
            if ($("#chkTOutlet").is(":checked")) {
                $("#lstBoxTOutlet").prop("disabled", false);
                $("#chkTOutletAnyOne").prop("disabled", false);
                $("#chkTOutletLast").prop("disabled", false);
            }
            else {
                $("#chkTOutletAnyOne").prop("disabled", true);
                $("#chkTOutletLast").prop("disabled", true);
                $("#lstBoxTOutlet").prop("disabled", true);
                $("#chkTOutletAnyOne").prop('checked', false);
                $("#chkTOutletLast").prop('checked', false);
                $("#lstBoxTOutlet")[0].selectedIndex = -1;
            }
        });

        $("#chkGender").on('change', function () {
            if ($("#chkGender").is(":checked")) {
                $("#ddlGender").prop('disabled', false);
            }
            else {
                $("#ddlGender").prop('disabled', true);
            }
        });

        $("#chkCity").on('change', function () {
            if ($("#chkCity").is(":checked")) {
                $("#txtCity").prop('disabled', false);
            }
            else {
                $("#txtCity").prop('disabled', true);
            }
        });

        $("#chkAge").on('change', function () {
            if ($("#chkAge").is(":checked")) {
                $("#txtAgefrom").prop('disabled', false);
                $("#txtAgeTo").prop('disabled', false);
            }
            else {
                $("#txtAgefrom").prop('disabled', true);
                $("#txtAgeTo").prop('disabled', true);
            }
        });

    }

    function ShowSecondFilters() {
        if ($("#chkTxnCumiulative").is(":checked")) {
            $("#dvCumulative").show();

            $("#dvTxnOnlyOnce").hide();
            $("#dvTxnInactive").hide();
        }
        else {
            $("#dvCumulative").hide();
        }

        if ($("#chkTransacting").is(":checked")) {
            ShowAll();
            $("#ddlOnlyOnce").val($("#ddlOnlyOnce option:first").val());
            $("#dvNonTxnFilters").hide();
            $("#dvNonTxnDLC").hide();
            $("#dvTxnFilters").show();
            $("#dvDLCReferalFilters").hide();
            $("#dvMemberAFilters").hide();
            $("#dvMemberAThirdFilters").hide();
            $("#dvMDLCSource").hide();

            if ($("#chkTxnCumiulative").is(":checked")) {
                $("#dvCumulative").show();
            }
            else {
                $("#dvCumulative").hide();
            }
        }
        else if ($("#chkNonTransacting").is(":checked")) {
            ShowAll();
            $("#dvTxnFilters").hide();
            $("#dvTxnOnlyOnce").hide();
            $("#dvTxnInactive").hide();
            $("#dvCumulative").hide();
            $("#dvMemberAFilters").hide();
            $("#dvNonTxnFilters").show();
            $("#dvMemberAThirdFilters").hide();
            $("#dvMDLCSource").hide();
            if ($("#chkNonTxnAll").is(":checked") || $("#chkNonTxnEnrolled").is(":checked") || $("#chkNonTxnBulkUpload").is(":checked") || $("#chkNonTxnReferal").is(":checked") || $("#chkNonTxnDLC").is(":checked")) {
                HideAll();
                $("#dvEnrolledRange").show();
                if ($("#chkNonTxnDLC").is(":checked")) {
                    $("#dvNonTxnDLC").show();
                }
                else {
                    $("#dvNonTxnDLC").hide();
                }
            }
        }
        else if ($("#chkMemberAcquition").is(":checked")) {
            ShowAll();
            $("#dvTxnFilters").hide();
            $("#dvTxnOnlyOnce").hide();
            $("#dvTxnInactive").hide();
            $("#dvCumulative").hide();
            $("#dvNonTxnFilters").hide();
            $("#dvNonTxnDLC").hide();
            $("#dvMemberAFilters").show();
            if ($("#chkMReferal").is(":checked") || $("#chkMDLC").is(":checked")) {
                $("#dvMemberAThirdFilters").show();
                if ($("#chkMDLC").is(":checked"))
                    $("#dvMDLCSource").show();
                else
                    $("#dvMDLCSource").hide();
            }
            if ($("#chkMANonTransacting").is(":checked")) {
                HideAll();
                $("#dvEnrolledRange").show();
            }
        }
    }

    $("#chkTxnOnlyOnce").on('change', function () {
        if ($("#chkTxnOnlyOnce").is(":checked")) {
            $("#dvTxnOnlyOnce").show();
            $("#dvTxnInactive").hide();
        }
        else {
            $("#dvTxnOnlyOnce").hide();
        }
    })

    $("#chkTxnInactive").on('change', function () {
        if ($("#chkTxnInactive").is(":checked")) {
            $("#dvTxnInactive").show();
        }
        else {
            $("#dvTxnInactive").hide();
        }
    })

    $("#ddlOnlyOnce").change(function () {
        if ($("#ddlOnlyOnce").val() != "") {
            if ($("#ddlOnlyOnce").val() != "6") {
                /* $("#txnSection").hide();*/
                $("#dvEnrolledRange").hide();
                $("#dvTxnCount").hide();
                $("#dvPointBalance").hide();
                $("#dvRedeemed").hide();
                $("#dvNeverPurchased").hide();
                $("#headingProduct").hide();
                $("#dvPurchased").hide();
                $("#dvInactive").hide();
                $("#dvSpend").hide();
                $("#hrProduct").hide();

            }
            else {
                /*$("#txnSection").show();*/
                $("#dvEnrolledRange").hide();
                $("#dvTxnCount").hide();
                $("#dvPointBalance").hide();
                $("#dvRedeemed").hide();
                $("#dvNeverPurchased").hide();
                $("#headingProduct").hide();
                $("#dvPurchased").hide();
                $("#dvInactive").show();
                $("#dvSpend").show();
                $("#hrProduct").hide();
            }
        }
        else {
            ShowAll();
        }
    });

    $("#ddlInactive").change(function () {
        if ($("#ddlInactive").val() != "") {
            if ($("#ddlInactive").val() != "8") {
                /*$("#txnSection").hide();*/
                $("#dvEnrolledRange").hide();
                $("#dvTxnCount").hide();
                $("#dvPointBalance").hide();
                $("#dvRedeemed").hide();
                $("#dvNeverPurchased").hide();
                $("#headingProduct").hide();
                $("#dvPurchased").hide();
                $("#hrProduct").hide();
                //$("#dvInactive").show();
                //$("#dvSpend").show();

            }
            else {
                ShowAll();
            }
        }
        else {
            ShowAll();
        }
    });

    $("#chkAll").change(function () {
        /*$("#txnSection").show();*/
        $("#dvEnrolledRange").show();
        $("#dvTxnCount").show();
        $("#dvPointBalance").show();
        $("#dvRedeemed").show();
        $("#dvNeverPurchased").show();
        $("#headingProduct").show();
        $("#dvPurchased").show();
        $("#dvInactive").show();
        $("#dvSpend").show();
        $("#dvTxnOnlyOnce").hide();
        $("#dvTxnInactive").hide();
    });

    $("#chkTxnInactive").change(function () {
        /*$("#txnSection").show();*/
        $("#dvEnrolledRange").show();
        $("#dvTxnCount").show();
        $("#dvPointBalance").show();
        $("#dvRedeemed").show();
        $("#dvNeverPurchased").show();
        $("#headingProduct").show();
        $("#dvPurchased").show();
        $("#dvInactive").show();
        $("#dvSpend").show();
        $("#dvTxnOnlyOnce").hide();
    });

    function ShowAll() {
        $("#dvAvgTicket").show();
        $("#dvEnrolledRange").show();
        $("#dvTxnCount").show();
        $("#dvPointBalance").show();
        $("#dvRedeemed").show();
        $("#dvNeverPurchased").show();
        $("#headingProduct").show();
        $("#dvPurchased").show();
        $("#dvInactive").show();
        $("#dvSpend").show();
        $("#hrProduct").show();
    }

    function HideAll() {
        $("#dvAvgTicket").hide();
        $("#dvEnrolledRange").hide();
        $("#dvTxnCount").hide();
        $("#dvPointBalance").hide();
        $("#dvRedeemed").hide();
        $("#dvNeverPurchased").hide();
        $("#headingProduct").hide();
        $("#dvPurchased").hide();
        $("#dvInactive").hide();
        $("#dvSpend").hide();
        $("#hrProduct").hide();
    }

    $("#ddlSpend").change(function () {
        var selected = $("#ddlSpend option:selected").text();
        if (selected == 'Between') {
            $("#txtSpendMin").show();
            $("#txtSpendMax").show();
            $('#txtSpendMin').attr('placeholder', 'From Amount');
            $('#txtSpendMax').attr('placeholder', 'To Amount');
        }
        else if (selected == 'Less than') {
            $("#txtSpendMin").show();
            $("#txtSpendMax").hide();
            $('#txtSpendMin').attr('placeholder', 'Amount');
        }
        else if (selected == 'More than') {
            $("#txtSpendMin").hide();
            $("#txtSpendMax").show();
            $('#txtSpendMax').attr('placeholder', 'Amount');
        }
        else {
            $("#txtSpendMin").hide();
            $("#txtSpendMax").hide();
        }
    });

    $("#ddlTxnCount").change(function () {
        var selected = $("#ddlTxnCount option:selected").text();
        if (selected == 'Between') {
            $("#txtTxnCountMin").show();
            $("#txtTxnCountMax").show();
            $('#txtTxnCountMin').attr('placeholder', 'From Txn Count');
            $('#txtTxnCountMax').attr('placeholder', 'To Txn Count');
        }
        else if (selected == 'Less than') {
            $("#txtTxnCountMin").show();
            $("#txtTxnCountMax").hide();
            $('#txtTxnCountMin').attr('placeholder', 'Txn Count');
        }
        else if (selected == 'More than') {
            $("#txtTxnCountMax").show();
            $("#txtTxnCountMin").hide();
            $('#txtTxnCountMax').attr('placeholder', 'Txn Count');
        }
        else {
            $("#txtTxnCountMin").hide();
            $("#txtTxnCountMax").hide();
        }
    });

    $("#ddlPointsBalance").change(function () {
        var selected = $("#ddlPointsBalance option:selected").text();
        if (selected == 'Between') {
            $("#txtPointsBalMin").show();
            $("#txtPointsBalMax").show();
            $('#txtPointsBalMin').attr('placeholder', 'From Point Balance');
            $('#txtPointsBalMax').attr('placeholder', 'To Point Balance');
        }
        else if (selected == 'Less than') {
            $("#txtPointsBalMin").show();
            $("#txtPointsBalMax").hide();
            $('#txtPointsBalMin').attr('placeholder', 'Point Balance');
        }
        else if (selected == 'More than') {
            $("#txtPointsBalMax").show();
            $("#txtPointsBalMin").hide();
            $('#txtPointsBalMax').attr('placeholder', 'Point Balance');
        } else {
            $("#txtPointsBalMin").hide();
            $("#txtPointsBalMax").hide();
        }
    });

    $("#rbtnCTxnCount").on('change', function () {
        if ($("#rbtnCTxnCount").is(":checked")) {
            $("#ddlTxnCumulative").prop('disabled', false);
            $("#txtCTxnCount").prop('disabled', false);
            $("#txtCTxnMonths").prop('disabled', false);
            $("#ddlTxnCumulativeFrequency").prop('disabled', false);

            $("#ddlSpendCumulative").prop('disabled', true);
            $("#txtCSpendCount").prop('disabled', true);
            $("#txtCSpendMonths").prop('disabled', true);
            $("#ddlSpendCumulativeFrequency").prop('disabled', true);
        }
    })

    $("#rbtnCSpend").on('change', function () {
        if ($("#rbtnCSpend").is(":checked")) {
            $("#ddlTxnCumulative").prop('disabled', true);
            $("#txtCTxnCount").prop('disabled', true);
            $("#txtCTxnMonths").prop('disabled', true);
            $("#ddlTxnCumulativeFrequency").prop('disabled', true);

            $("#ddlSpendCumulative").prop('disabled', false);
            $("#txtCSpendCount").prop('disabled', false);
            $("#txtCSpendMonths").prop('disabled', false);
            $("#ddlSpendCumulativeFrequency").prop('disabled', false);
        }
    })

    function GetDataToFilter() {
        var AllData = [];

        //First, Second and Third level Radio buttons or Checkboxes
        item = {}
        if ($("#chkTransacting").is(":checked")) {
            item["FirstChk"] = "Transacting";
            if ($("#chkAll").is(":checked")) {
                item["SecondChk"] = "All";
            }
            if ($("#chkTxnOnlyOnce").is(":checked")) {
                item["SecondChk"] = "OnlyOnce";
                item["OnlyOnceSegment"] = $("#ddlOnlyOnce").val();
            }
            if ($("#chkTxnInactive").is(":checked")) {
                item["SecondChk"] = "Inactive";
                item["InactiveSegment"] = $("#ddlInactive").val();
                item["ExcludeOnlyOnce"] = $("#chkExcludeOnlyOnce").is(":checked");
            }
            if ($("#chkTxnCumiulative").is(":checked")) {
                item["SecondChk"] = "Cumiulative";
                if ($("#rbtnCTxnCount").is(":checked")) {
                    item["LSGT"] = $("#ddlTxnCumulative").val();
                    item["TxnCount"] = $("#txtCTxnCount").val();
                    item["Months"] = $("#txtCTxnMonths").val();
                    item["Frequency"] = $("#ddlTxnCumulativeFrequency").val();
                }
                if ($("#rbtnCSpend").is(":checked")) {
                    item["LSGT"] = $("#ddlSpendCumulative").val();
                    item["TxnCount"] = $("#txtCSpendCount").val();
                    item["Months"] = $("#txtCSpendMonths").val();
                    item["Frequency"] = $("#ddlSpendCumulativeFrequency").val();
                }
            }
        }
        if ($("#chkNonTransacting").is(":checked")) {
            item["FirstChk"] = "NonTransacting";
            if ($("#chkNonTxnAll").is(":checked")) {
                item["SecondChk"] = "All";
            }
            if ($("#chkNonTxnEnrolled").is(":checked")) {
                item["SecondChk"] = "Enrolled";
            }
            if ($("#chkNonTxnBulkUpload").is(":checked")) {
                item["SecondChk"] = "BulkUpload";
            }
            if ($("#chkNonTxnReferal").is(":checked")) {
                item["SecondChk"] = "Referal";
            }
            if ($("#chkNonTxnDLC").is(":checked")) {
                item["SecondChk"] = "DLC";
                item["QRSource"] = $("#ddlDLCSourceNT").val();
            }
        }
        if ($("#chkMemberAcquition").is(":checked")) {
            item["FirstChk"] = "MemberAcquition";
            if ($("#chkMReferal").is(":checked")) {
                item["SecondChk"] = "Referal";
                if ($("#chkMAAll").is(":checked")) {
                    item["MAFinal"] = "All";
                }
                if ($("#chkMATransacting").is(":checked")) {
                    item["MAFinal"] = "Transacting";
                }
                if ($("#chkMANonTransacting").is(":checked")) {
                    item["MAFinal"] = "NonTransacting";
                }
            }
            if ($("#chkMDLC").is(":checked")) {
                item["SecondChk"] = "DLC";
                if ($("#chkMAAll").is(":checked")) {
                    item["MAFinal"] = "All";
                }
                if ($("#chkMATransacting").is(":checked")) {
                    item["MAFinal"] = "Transacting";
                }
                if ($("#chkMANonTransacting").is(":checked")) {
                    item["MAFinal"] = "NonTransacting";
                }
                item["QRSource"] = $("#ddlDLCSource").val();
            }
        }
        AllData.push(item);

        //Transactional Filters
        item1 = {}
        item1["IsAvgTicket"] = "No";
        item1["IsEnrolledRange"] = "No";
        item1["IsInactiveSince"] = "No";
        item1["IsSpend"] = "No";
        item1["IsTxnCount"] = "No";
        item1["IsPointBalance"] = "No";

        if ($("#chkAvgTicket").is(":checked")) {
            item1["IsAvgTicket"] = "Yes";
            item1["AvgTicket"] = $("#txtAvgTicket").val();
        }

        if ($("#chkEnrolledRange").is(":checked")) {
            item1["IsEnrolledRange"] = "Yes";
            item1["Enrollfromdt"] = $("#txtEnrollfromdt").val();
            item1["Enrolltodt"] = $("#txtEnrolltodt").val();
        }

        if ($("#chkInactiveSince").is(":checked")) {
            item1["IsInactiveSince"] = "Yes";
            item1["NonTransactedSince"] = $("#txtNonTransactedMax").val();
        }

        if ($("#chkSpend").is(":checked")) {
            item1["IsSpend"] = "Yes";
            item1["SpendMin"] = $("#txtSpendMin").val();
            item1["SpendMax"] = $("#txtSpendMax").val();
        }

        if ($("#chkTxnCount").is(":checked")) {
            item1["IsTxnCount"] = "Yes";
            item1["CountMin"] = $("#txtTxnCountMin").val();
            item1["CountMax"] = $("#txtTxnCountMax").val();
        }

        if ($("#chkPointBalance").is(":checked")) {
            item1["IsPointBalance"] = "Yes";
            item1["PointsBalMin"] = $("#txtPointsBalMin").val();
            item1["PointsBalMax"] = $("#txtPointsBalMax").val();
        }

        if ($("#chkRedeemed").is(":checked")) {
            if ($("#rbtnRedeemed").is(":checked")) {
                item1["IsRedeemed"] = "Yes";
            }
            if ($("#rbtnNonRedeemed").is(":checked")) {
                item1["IsRedeemed"] = "No";
            }
        }

        AllData.push(item1);

        //Product Filter
        item2 = {}
        item2["IsNeverPurchased"] = "No";
        item2["IsPurchased"] = "No";

        if ($("#chkNeverPurchased").is(":checked")) {
            item2["IsNeverPurchased"] = "Yes";
            item2["NPCategory"] = $("#ddlNPCategory").val();
            item2["NPSubCategory"] = $("#ddlNPSubCategory").val();
            item2["NPProduct"] = $("#ddlNPProduct").val();
        }

        if ($("#chkPurchased").is(":checked")) {
            item2["IsPurchased"] = "Yes";
            item2["PCategory"] = $("#ddlPCategory").val();
            item2["PSubCategory"] = $("#ddlPSubCategory").val();
            item2["PProduct"] = $("#ddlPProduct").val();
        }
        AllData.push(item2);

        //Product Filter
        item3 = {}
        item3["IsBrands"] = "No";
        item3["IsOutlet"] = "No";
        item3["IsTOutlet"] = "No";
        item3["TOutletsAnyLast"] = "No";

        if ($("#chkBrands").is(":checked")) {
            item3["IsBrands"] = "Yes";
            item3["Zone"] = $("#ddlBrands").val();
        }

        if ($("#chkOutlet").is(":checked")) {
            item3["IsOutlet"] = "Yes";
            item3["Outlets"] = $("#lstBoxOutlet").val();
        }

        if ($("#chkTOutlet").is(":checked")) {
            item3["IsTOutlet"] = "Yes";
            item3["TransactingOutlets"] = $("#lstBoxTOutlet").val();
        }

        if ($("#chkTOutletAnyOne").is(":checked")) {
            item3["TOutletsAnyLast"] = "AnyOne";
        }

        if ($("#chkTOutletLast").is(":checked")) {
            item3["TOutletsAnyLast"] = "Last";
        }

        AllData.push(item3);

        //Demographic Filter
        item4 = {}
        item4["IsTier"] = "No";
        item4["IsGender"] = "No";
        item4["IsCity"] = "No";
        item4["IsAge"] = "No";

        if ($("#chkTier").is(":checked")) {
            item4["IsTier"] = "Yes";
            item4["Tier"] = $("#ddlTier").val();
        }

        if ($("#chkGender").is(":checked")) {
            item4["IsGender"] = "Yes";
            item4["Gender"] = $("#ddlGender").val();
        }

        if ($("#chkCity").is(":checked")) {
            item4["IsCity"] = "Yes";
            item4["City"] = $("#txtCity").val();
        }

        if ($("#chkAge").is(":checked")) {
            item4["IsAge"] = "Yes";
            item4["AgeFrom"] = $("#txtAgefrom").val();
            item4["AgeTo"] = $("#txtAgeTo").val();
        }

        AllData.push(item4);

        var data = JSON.stringify(AllData);

         $.ajax({
            type: "POST",
            url: '@Url.Action("GetSSFilterCount", "Reports")',
             data: "{'JsonData': '" + JSON.stringify(AllData) + "',IsCount': '1'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (response) {




                $("#divLoader").hide();
            },
            failure: function (response) {
                $("#divLoader").hide();
            },
            error: function (response) {
                $('#dvMemberData').html(response.responseText);
                $("#divLoader").hide();
            }
        });

        document.getElementById("btnGenerate").disabled = "";
        document.getElementById("btnSave").disabled = "";
    }

    function SaveFilterCriteria() {
        var AllData = [];

        //First, Second and Third level Radio buttons or Checkboxes
        item = {}
        item["SecondChkCumu"] = "No";
        item["SecondChk"] = "No";
        item["MAFinal"] = "No";
        if ($("#chkTransacting").is(":checked")) {
            item["FirstChk"] = "Transacting";
            if ($("#chkAll").is(":checked")) {
                item["SecondChk"] = "All";
            }
            if ($("#chkTxnOnlyOnce").is(":checked")) {
                item["SecondChk"] = "OnlyOnce";
                item["OnlyOnceSegment"] = $("#ddlOnlyOnce").val();
            }
            if ($("#chkTxnInactive").is(":checked")) {
                item["SecondChk"] = "Inactive";
                item["InactiveSegment"] = $("#ddlInactive").val();
                item["ExcludeOnlyOnce"] = $("#chkExcludeOnlyOnce").is(":checked");
            }
            if ($("#chkTxnCumiulative").is(":checked")) {
                item["SecondChk"] = "Cumulative";
                if ($("#rbtnCTxnCount").is(":checked")) {
                    item["SecondChkCumu"] = "TxnCount";
                    item["LSGT"] = $("#ddlTxnCumulative").val();
                    item["TxnCount"] = $("#txtCTxnCount").val();
                    item["Months"] = $("#txtCTxnMonths").val();
                    item["Frequency"] = $("#ddlTxnCumulativeFrequency").val();
                }
                if ($("#rbtnCSpend").is(":checked")) {
                    item["SecondChkCumu"] = "CSpend";
                    item["LSGT"] = $("#ddlSpendCumulative").val();
                    item["TxnCount"] = $("#txtCSpendCount").val();
                    item["Months"] = $("#txtCSpendMonths").val();
                    item["Frequency"] = $("#ddlSpendCumulativeFrequency").val();
                }
            }
        }
        if ($("#chkNonTransacting").is(":checked")) {
            item["FirstChk"] = "NonTransacting";
            if ($("#chkNonTxnAll").is(":checked")) {
                item["SecondChk"] = "All";
            }
            if ($("#chkNonTxnEnrolled").is(":checked")) {
                item["SecondChk"] = "Enrolled";
            }
            if ($("#chkNonTxnBulkUpload").is(":checked")) {
                item["SecondChk"] = "BulkUpload";
            }
            if ($("#chkNonTxnReferal").is(":checked")) {
                item["SecondChk"] = "Referal";
            }
            if ($("#chkNonTxnDLC").is(":checked")) {
                item["SecondChk"] = "DLC";
                item["QRSource"] = $("#ddlDLCSourceNT").val();
            }
        }
        if ($("#chkMemberAcquition").is(":checked")) {
            item["FirstChk"] = "MemberAcquition";
            if ($("#chkMReferal").is(":checked")) {
                item["SecondChk"] = "Referal";
                if ($("#chkMAAll").is(":checked")) {
                    item["MAFinal"] = "All";
                }
                if ($("#chkMATransacting").is(":checked")) {
                    item["MAFinal"] = "Transacting";
                }
                if ($("#chkMANonTransacting").is(":checked")) {
                    item["MAFinal"] = "NonTransacting";
                }
            }
            if ($("#chkMDLC").is(":checked")) {
                item["SecondChk"] = "DLC";
                if ($("#chkMAAll").is(":checked")) {
                    item["MAFinal"] = "All";
                }
                if ($("#chkMATransacting").is(":checked")) {
                    item["MAFinal"] = "Transacting";
                }
                if ($("#chkMANonTransacting").is(":checked")) {
                    item["MAFinal"] = "NonTransacting";
                }
                item["QRSource"] = $("#ddlDLCSource").val();
            }
        }
        AllData.push(item);

        //Transactional Filters
        item1 = {}
        item1["IsAvgTicket"] = "No";
        item1["IsEnrolledRange"] = "No";
        item1["IsInactiveSince"] = "No";
        item1["IsSpend"] = "No";
        item1["IsTxnCount"] = "No";
        item1["IsPointBalance"] = "No";
        item1["IsRedeemed"] = "";

        if ($("#chkAvgTicket").is(":checked")) {
            item1["IsAvgTicket"] = "Yes";
            item1["AvgTicket"] = $("#txtAvgTicket").val();
        }

        if ($("#chkEnrolledRange").is(":checked")) {
            item1["IsEnrolledRange"] = "Yes";
            item1["Enrollfromdt"] = $("#txtEnrollfromdt").val();
            item1["Enrolltodt"] = $("#txtEnrolltodt").val();
        }

        if ($("#chkInactiveSince").is(":checked")) {
            item1["IsInactiveSince"] = "Yes";
            item1["NonTransactedSince"] = $("#txtNonTransactedMax").val();
        }

        if ($("#chkSpend").is(":checked")) {
            item1["IsSpend"] = "Yes";
            item1["SpendMin"] = $("#txtSpendMin").val();
            item1["SpendMax"] = $("#txtSpendMax").val();
        }

        if ($("#chkTxnCount").is(":checked")) {
            item1["IsTxnCount"] = "Yes";
            item1["CountMin"] = $("#txtTxnCountMin").val();
            item1["CountMax"] = $("#txtTxnCountMax").val();
        }

        if ($("#chkPointBalance").is(":checked")) {
            item1["IsPointBalance"] = "Yes";
            item1["PointsBalMin"] = $("#txtPointsBalMin").val();
            item1["PointsBalMax"] = $("#txtPointsBalMax").val();
        }

        if ($("#chkRedeemed").is(":checked")) {
            if ($("#rbtnRedeemed").is(":checked")) {
                item1["IsRedeemed"] = "Yes";
            }
            if ($("#rbtnNonRedeemed").is(":checked")) {
                item1["IsRedeemed"] = "No";
            }
        }

        AllData.push(item1);

        //Product Filter
        item2 = {}
        item2["IsNeverPurchased"] = "No";
        item2["IsPurchased"] = "No";

        if ($("#chkNeverPurchased").is(":checked")) {
            item2["IsNeverPurchased"] = "Yes";
            item2["NPCategory"] = $("#ddlNPCategory").val();
            item2["NPSubCategory"] = $("#ddlNPSubCategory").val();
            item2["NPProduct"] = $("#ddlNPProduct").val();
            
            item2["NPCategoryName"] = $("#ddlNPCategory option:selected").text();
            item2["NPSubCategoryName"] = $("#ddlNPSubCategory option:selected").text();
            item2["NPProductName"] = $("#ddlNPProduct option:selected").text();
        }

        if ($("#chkPurchased").is(":checked")) {
            item2["IsPurchased"] = "Yes";
            item2["PCategory"] = $("#ddlPCategory").val();
            item2["PSubCategory"] = $("#ddlPSubCategory").val();
            item2["PProduct"] = $("#ddlPProduct").val();

            item2["PCategoryName"] = $("#ddlPCategory option:selected").text();
            item2["PSubCategoryName"] = $("#ddlPSubCategory option:selected").text();
            item2["PProductName"] = $("#ddlPProduct option:selected").text();
        }
        AllData.push(item2);

        //Product Filter
        item3 = {}
        item3["IsBrands"] = "No";
        item3["IsOutlet"] = "No";
        item3["IsTOutlet"] = "No";
        item3["TOutletsAnyLast"] = "No";

        if ($("#chkBrands").is(":checked")) {
            item3["IsBrands"] = "Yes";
            item3["Zone"] = $("#ddlBrands").val();
        }

        if ($("#chkOutlet").is(":checked")) {
            item3["IsOutlet"] = "Yes";
            console.log($("#lstBoxOutlet").val());
            var selectedVal = [];
            $('#lstBoxOutlet :selected').each(function (i, selected) {
                selectedVal[i] = $(selected).text();                
            });
            item3["Outlets"] = selectedVal;
        }

        if ($("#chkTOutlet").is(":checked")) {
            item3["IsTOutlet"] = "Yes";
            item3["TransactingOutlets"] = $("#lstBoxTOutlet").val();
        }

        if ($("#chkTOutletAnyOne").is(":checked")) {
            item3["TOutletsAnyLast"] = "Anyone";
        }

        if ($("#chkTOutletLast").is(":checked")) {
            item3["TOutletsAnyLast"] = "Last";
        }

        AllData.push(item3);

        //Demographic Filter
        item4 = {}
        item4["IsTier"] = "No";
        item4["IsGender"] = "No";
        item4["IsCity"] = "No";
        item4["IsAge"] = "No";

        if ($("#chkTier").is(":checked")) {
            item4["IsTier"] = "Yes";
            item4["Tier"] = $("#ddlTier").val();
        }

        if ($("#chkGender").is(":checked")) {
            item4["IsGender"] = "Yes";
            item4["Gender"] = $("#ddlGender").val();
        }

        if ($("#chkCity").is(":checked")) {
            item4["IsCity"] = "Yes";
            item4["City"] = $("#txtCity").val();
        }

        if ($("#chkAge").is(":checked")) {
            item4["IsAge"] = "Yes";
            item4["AgeFrom"] = $("#txtAgefrom").val();
            item4["AgeTo"] = $("#txtAgeTo").val();
        }

        AllData.push(item4);

        var data = JSON.stringify(AllData);

         $.ajax({
            type: "POST",
            url: '@Url.Action("SaveDataset", "Reports")',
             data: "{'JsonData': '" + JSON.stringify(AllData) + "','DSName': '" + $('#txtDSName').val() + "'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (response) {




                $("#divLoader").hide();
            },
            failure: function (response) {
                $("#divLoader").hide();
            },
            error: function (response) {
                $('#dvMemberData').html(response.responseText);
                $("#divLoader").hide();
            }
        });

        document.getElementById("btnGenerate").disabled = "";
        document.getElementById("btnSave").disabled = "";
    }


</script>