
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Index</h2>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script src="~/Scripts/cute-alert-master/cute-alert.js"></script>
<link href="~/Scripts/cute-alert-master/style-alert.css" rel="stylesheet" />

<div>
    <input type="hidden" id="hdnuploadDocBase64" />
    <div>
        <div id="dvDocumentUpload">
            <table border="2" cellpadding="5" cellspacing="5" style="margin-top:50px; margin-left:30px;">
                <tr>
                    <th colspan="2" style="padding:10px;text-align:center;">Document Upload</th>
                </tr>
                <tr>
                    <td style="padding:10px;">Document Upload </td>
                    <td style="padding:10px;">
                        <input type="file" id="uploadDoc" class="input50" style="width:80%" />
                    </td>
                </tr>
                @*<tr>
                        <td style="padding:10px">
                            <a href="#" onclick="FileDownload();" style="color: blue">DownLoad Sample File</a>
                        </td>
                    </tr>*@
            </table>
            <div style="margin-top:20px;">
                @*<input type="file" id="FileUpload" />*@
                <input type="button" id="btnUpload1" class="btn btn-primary" style="margin-left: 10px; background-color: #2651be;" value="UploadData" />
            </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        document.getElementById("uploadDoc").addEventListener('change', handleFileSelectProductWise, false);
        $("#btnUpload1").click(function () {
            UploadDocuments();

        });
    });
    function handleFileSelectProductWise(evt) {
        var id = evt.currentTarget.id;
        var qId = id.substring(4, id.length);
        var f = evt.target.files[0];
        var reader = new FileReader();
        reader.onload = (function (theFile) {
            return function (e) {
                var binaryData = e.target.result;
                var base64String = window.btoa(binaryData);
                $("#hdnuploadDocBase64").val(base64String);
                //$("#hdnLogo").val($("#FileUploadLogo")[0].files[0].name);
            };
        })(f);
        reader.readAsBinaryString(f);
    }
    function UploadDocuments() {
        var DocumentStr = $("#hdnuploadDocBase64").val();
        $("#divLoader").show();
            $.ajax({
                type: "POST",
                url: '@Url.Action("UploadDocument", "DocumentLibrary")',
                data: '{fileData: ' + JSON.stringify(DocumentStr) + '}',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (result) {
                    console.log(result)
                    if (result == true) {
                        cuteAlert({
                            type: "success",
                            title: "Saved",
                            message: "Earn config saved successfully",
                            buttonText: "Okay"
                        })
                        $("#divLoader").hide();
                    }
                    else {
                        cuteAlert({
                            type: "error",
                            title: "Oops..",
                            message: "There is a problem in saving point rules",
                            buttonText: "Okay"
                        })
                        $("#divLoader").hide();
                    }
                },
                error: function (result) {
                    //console.log(result.responseText)
                }
            });
    }
</script>
